<!DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">

<script>
  // извлекаем тему из URL (параметр ?theme=...)
  const urlParams = new URLSearchParams(window.location.search);
  const theme = urlParams.get('theme') || 'light';

  // устанавливаем атрибут на <html>, чтобы ваш CSS сработал
  document.documentElement.setAttribute('data-color-scheme', theme);
</script>

<style>
:root,
html[data-color-scheme="light"] {
 --bg-body: #edeef2;
 --text-main: #000000;
 --text-muted: #666666;
 --bg-item: #f5f5f5;
 --bg-item-hover: #e0e0e0;
 --border-color: #dddddd;
 --bg-footer: #e1e2e6;
 --bg-input: #ffffff;
 --shadow: rgba(0, 0, 0, 0.05);
}

html[data-color-scheme="dark"] {
 --bg-body: #25262d;
 --text-main: #ffffff;
 --text-muted: #d1d1d2;
 --bg-item: #2d2d2d;
 --bg-item-hover: #3d3d3d;
 --border-color: #3d3d3d;
 --bg-footer: #252525;
 --bg-input: #17181c;
 --shadow: rgba(23, 24, 28, 0.4);
}

::-webkit-scrollbar { display: none; }

body {
 font-family: 'Segoe UI', Arial, Tahoma, sans-serif; 
 background: var(--bg-body); 
 color: var(--text-main); 
 padding: 15px; 
 margin: 0; 
 overflow-y: auto; 
}

h3 { 
 font-size: 16px; 
 font-weight: 500; 
 color: var(--text-muted);
 margin: 0 0 15px 5px; 
}

.item { 
 background: var(--bg-item); 
 border: 1px solid var(--border-color); 
 padding: 10px; 
 border-radius: 8px; 
 cursor: pointer; 
 display: flex;
 flex-direction: column;
 transition: transform 0.15s ease;
}

.item:hover { 
 background: var(--bg-item-hover);
 border-color: #0078d4; 
 transform: scale(1.03); 
}

.item span { 
 margin-top: 10px;
 font-size: 12px;
 color: var(--text-muted);
 text-align: center;
}

.footer { 
 position: fixed; 
 bottom: 0; left: 0; width: 100%; 
 padding: 12px 20px; 
 background: var(--bg-footer); 
 border-top: 1px solid var(--border-color);
 display: flex;
 justify-content: flex-end;
 box-sizing: border-box; 
}

#search-input {
 width: 100%;
 height: 48px;
 padding: 10px 15px;
 background: var(--bg-input);
 border: 1px solid var(--border-color);
 border-radius: 16px;
 color: var(--text-main);
 font-size: 16px;
 outline: none;
 box-sizing: border-box;
 box-shadow: 3px 3px 3px var(--shadow);
}

#search-input:focus {
   box-shadow: 3px 3px 5px var(--shadow);

}

.dot { display: inline-block; width: 10px; height: 10px; background: #ff4d4d; border-radius: 50%; margin: 0 8px; box-shadow: 0 0 8px #ff4d4d; animation: pulse 1.5s infinite; }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; padding-bottom: 80px; }
.thumbnail-wrapper { width: 100%; aspect-ratio: 16/9; overflow: hidden; border-radius: 4px; background: #000; display: flex; align-items: center; justify-content: center; }

.item img { width: 100%; height: 100%; object-fit: contain; }
button { padding: 6px 16px; border-radius: 4px; border: 1px solid var(--border-color); background: var(--bg-item); color: var(--text-main); cursor: pointer; }
</style>

</head>
<body>
 <h3 style="margin-top:5"><center/><span class="dot"></span><b>Окно/приложение для трансляции</b><span class="dot"></span></h3>
 <input type="text" id="search-input" placeholder="Поиск приложения по названию..." autocomplete="off" style="margin:0px 0px 10px 0px">
 <div id="list" class="grid">
  <!-- источники -->
 </div>
 <div class="footer">
  <button id="cancel-btn">Отмена</button>
 </div>
 <script src="./picker.js"></script>
</body>
</html>
